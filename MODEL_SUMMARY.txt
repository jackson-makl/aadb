AADB RISK PREDICTION MODEL - SUMMARY
=====================================

MODEL CONFIGURATION:
-------------------
Data Source: DUA + IRB Trackers (Joined)
  - DUA Tracker (AADB_DUA_TRACKER.csv): 54 samples (100%)
  - IRB Tracker (AADB_IRB_TRACKER.csv): 38 samples (68% coverage)
  - Total: 56 samples after left join (keeps all DUA, adds IRB where available)
Target Variable: any_delay (DUA process delays)
Training Samples: 56
Algorithm: Random Forest (optimized via GridSearchCV)
Hyperparameters:
  - n_estimators: 50 (ensemble of 50 decision trees)
  - max_depth: 3
  - min_samples_split: 5
  - min_samples_leaf: 2
  - class_weight: balanced

KEY FEATURES (18 total):
-----------------------
1. Categorical Features:
   - Program_encoded (Program type)

2. DUA Timing Features (2):
   - intake_month
   - has_acknowledgment (Recipient acknowledged DUA draft)

3. DUA Derived Features (9):
   - intake_ratio (OCGM intake vs benchmark)
   - intake_delayed_flag (intake exceeds threshold)
   - pe_ratio (PE turnaround vs benchmark)
   - pe_delayed_flag (PE exceeds threshold)
   - fe_ratio (PE to FE vs benchmark)
   - total_dua_ratio (total DUA time vs benchmark)
   - dua_critical_delay (critical delay flag)
   - has_acknowledgment (duplicate for compatibility)

4. IRB Features (7):
   - is_exempt (IRB exempt status)
   - is_nhsr (Not Human Subjects Research)
   - irb_delayed (IRB process delayed)
   - days_consult_to_submit (consult to submission timing)
   - days_submit_to_determination (submission to decision timing)
   - days_total_irb (total IRB process duration)
   - irb_timing_delayed (IRB timing exceeds benchmark)

PERFORMANCE METRICS:
-------------------
Cross-Validation F1: 0.905 ± 0.086 (5-fold CV)
Test Set F1: 0.889 (single split)
Model Stability: Good (moderate variance)

Class Distribution:
- Delayed: 38/56 (67.9%)
- Not Delayed: 18/56 (32.1%)

OPTIMIZATION HISTORY:
--------------------
1. Initial Model: CV F1 = 0.792 ± 0.116
2. Hyperparameter Tuning: Tested 100+ combinations
3. Final Model: CV F1 = 0.965 ± 0.043
   → Improvement: +21.8% performance, 63% less variance

MODEL SELECTION RATIONALE:
-------------------------
1. DUA Tracker chosen over Master Tracker:
   - 54 samples vs 17 (3x more data)
   - Better class balance (68/32 vs 94/6)
   - DUA is the primary bottleneck in the process

2. DUA-only chosen over DUA+IRB join:
   - Better performance (CV F1: 0.965 vs 0.902)
   - No data loss (54 vs 39 samples with inner join)
   - No imputation needed (0% vs 30% missing)
   - IRB delays uncorrelated with DUA delays (only 2/39 overlap)

3. Decision Tree chosen over Logistic Regression:
   - Superior cross-validation performance (0.965 vs 0.881)
   - Lower variance (±0.043 vs ±0.125)
   - Optimal hyperparameters found via GridSearchCV
   - Naturally handles non-linear relationships

4. Hyperparameter tuning results:
   - Tested: LR, Decision Tree with 100+ param combinations
   - Winner: Decision Tree (max_depth=2, balanced weights)
   - Comparison: DUA-only beats DUA+IRB across all algorithms

TOP PREDICTIVE FEATURES:
-----------------------
(Based on Random Forest feature importance - 15 out of 18 features actively used)

Top 5:
1. total_dua_ratio - 25.0%
2. pe_ratio - 13.8%
3. intake_ratio - 13.2%
4. intake_delayed_flag - 11.7%
5. intake_month - 11.6%

Additional active features (10 more contributing 25% importance):
  - fe_ratio, dua_critical_delay
  - IRB features: is_exempt, is_nhsr, irb_delayed
  - IRB timing: days_consult_to_submit, days_submit_to_determination, days_total_irb
  - has_acknowledgment, Program_encoded

Feature Ensemble Approach:
-------------------------
Random Forest (50 trees) analyzes 18 features from joined DUA + IRB data:
  ✓ 15 out of 18 features actively contribute (83%)
  ✓ Combines DUA and IRB process indicators
  ✓ Different trees use different feature combinations
  ✓ Ensemble averages predictions across 50 trees
  ✓ IRB data imputed where missing (32% of samples)
  ✓ Robust performance (CV F1: 0.905 ± 0.086)

Model Comparison (tested with joined dataset):
  - Decision Tree (depth=4): 0.925 F1, uses 3 features
  - Random Forest (50 trees): 0.905 F1, uses 15 features ✓ SELECTED
  - Logistic Regression: 0.688 F1, uses all 18 features (lower performance)

Why Random Forest with Joined Data?
  ✓ Uses comprehensive DUA + IRB feature set (18 features)
  ✓ Analyzes complete data access workflow
  ✓ Ensemble method handles missing IRB data via imputation
  ✓ Good performance (90.5% F1) with broad feature coverage
  ✓ More robust predictions through tree diversity

DEPLOYMENT:
----------
Model saved to: models/risk_predictor.pkl
Streamlit App: app.py
Start script: start.sh

